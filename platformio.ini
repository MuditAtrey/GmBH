; PlatformIO Project Configuration File

; ========== Arduino Designer Project (STANDALONE NODEMCU) ==========
; NodeMCU Standalone Interpreter (WiFi + MQTT + Execution all-in-one!)
; No Arduino R4 needed, no level shifter needed!
; All sensors are 3.3V compatible
[env:nodemcu_standalone]
platform = espressif8266
board = nodemcuv2
framework = arduino
build_src_filter = +<nodemcu_standalone.cpp>
lib_deps = 
    bblanchon/ArduinoJson@^7.0.0
    knolleary/PubSubClient@^2.8
    adafruit/DHT sensor library@^1.4.4
upload_speed = 460800
upload_resetmethod = nodemcu
monitor_speed = 115200
monitor_filters = 
    default
    time

; ========== Photodiode Hardware Test ==========
; Test photodiode circuit before implementing optical communication
[env:photodiode_test]
platform = espressif8266
board = nodemcuv2
framework = arduino
build_src_filter = +<photodiode_test.cpp>
upload_speed = 460800
upload_resetmethod = nodemcu
monitor_speed = 115200
monitor_filters = 
    default
    time

; ========== Optical Receiver (Blink to Send) ==========
; Receives JSON configs via photodiode optical transmission
; Place photodiode on blinking screen to receive configuration!
[env:nodemcu_optical]
platform = espressif8266
board = nodemcuv2
framework = arduino
build_src_filter = +<nodemcu_optical_receiver.cpp>
lib_deps = 
    bblanchon/ArduinoJson@^7.0.0
    knolleary/PubSubClient@^2.8
    adafruit/DHT sensor library@^1.4.4
    adafruit/Adafruit PWM Servo Driver Library@^3.0.2
upload_speed = 460800
upload_resetmethod = nodemcu
monitor_speed = 115200
monitor_filters = 
    default
    time

; ========== Simple HTTP Bridge Project ==========
; ESP8266 Simple HTTP Bridge (No SSL, Local Only)
[env:nodemcu_simple]
platform = espressif8266
board = nodemcuv2
framework = arduino
build_src_filter = +<nodemcu_simple.cpp>
upload_speed = 460800
upload_resetmethod = nodemcu
monitor_speed = 115200
monitor_filters = 
    default
    time

; ESP8266 NodeMCU v3 Environment
; Upload this to NodeMCU v3 to act as WiFi bridge
[env:nodemcu_v3]
platform = espressif8266
board = nodemcuv2  ; NodeMCU v3 uses same board definition as v2
framework = arduino
build_src_filter = +<esp8266_programmer.cpp>
lib_deps = 
    bblanchon/ArduinoJson@^6.21.3
upload_speed = 460800  ; Conservative speed for reliability
upload_resetmethod = nodemcu
monitor_speed = 115200
monitor_filters = 
    default
    time
build_flags = 
    -DNODEMCU_V3
    -DDEBUG_ESP_PORT=Serial
    -DDEBUG_ESP_CORE

; Legacy ESP8266 v2 (Keep for compatibility)
[env:esp8266_programmer]
platform = espressif8266
board = nodemcuv2
framework = arduino
build_src_filter = +<esp8266_programmer.cpp>
lib_deps = 
    bblanchon/ArduinoJson@^6.21.3
upload_speed = 460800
upload_resetmethod = nodemcu
monitor_speed = 115200

; Arduino R4 Minima Target Environment
; Command receiver and executor
[env:uno_r4_minima]
platform = renesas-ra
board = uno_r4_minima
framework = arduino
build_src_filter = +<arduino_target.cpp>
lib_deps = 
    bblanchon/ArduinoJson@^6.21.3
    arduino-libraries/Servo@^1.2.1
upload_speed = 115200
monitor_speed = 115200
